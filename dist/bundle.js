(()=>{"use strict";var t={71:(t,r,n)=>{n.d(r,{Z:()=>i});var e=n(645),o=n.n(e)()((function(t){return t[1]}));o.push([t.id,"html,\r\nbody {\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n\r\nbutton {\r\n  margin: 0;\r\n  padding: 0;\r\n  border: 0;\r\n  background: none;\r\n  font-size: 100%;\r\n  vertical-align: baseline;\r\n  font-family: inherit;\r\n  font-weight: inherit;\r\n  color: inherit;\r\n  -webkit-appearance: none;\r\n  appearance: none;\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n}\r\n\r\nbody {\r\n  font: 14px 'Helvetica Neue', Helvetica, Arial, sans-serif;\r\n  line-height: 1.4em;\r\n  background: #f5f5f5;\r\n  color: #4d4d4d;\r\n  min-width: 230px;\r\n  max-width: 550px;\r\n  margin: 0 auto;\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n  font-weight: 300;\r\n}\r\n\r\n:focus {\r\n  outline: 0;\r\n}\r\n\r\n.hidden {\r\n  display: none;\r\n}\r\n\r\n#app {\r\n  margin-top: 100px;\r\n}\r\n\r\n#app h1 {\r\n  width: 100%;\r\n  font-size: 60px;\r\n  text-align: center;\r\n  color: #333;\r\n  font-weight: 100;\r\n  font-family: Helvetica Neue, Helvetica, Arial, sans-serif;\r\n  margin-bottom: 50px;\r\n}\r\n\r\n.todoapp {\r\n  background: #fff;\r\n  margin: 30px 0 40px 0;\r\n  position: relative;\r\n  box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.2), 0 25px 50px 0 rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.todoapp input::-webkit-input-placeholder {\r\n  font-style: italic;\r\n  font-weight: 300;\r\n  color: #e6e6e6;\r\n}\r\n\r\n.todoapp input::-moz-placeholder {\r\n  font-style: italic;\r\n  font-weight: 300;\r\n  color: #e6e6e6;\r\n}\r\n\r\n.todoapp input::input-placeholder {\r\n  font-style: italic;\r\n  font-weight: 300;\r\n  color: #e6e6e6;\r\n}\r\n\r\n.todoapp h1 {\r\n  position: absolute;\r\n  top: -155px;\r\n  width: 100%;\r\n  font-size: 100px;\r\n  font-weight: 100;\r\n  text-align: center;\r\n  color: rgba(175, 47, 47, 0.15);\r\n  -webkit-text-rendering: optimizeLegibility;\r\n  -moz-text-rendering: optimizeLegibility;\r\n  text-rendering: optimizeLegibility;\r\n}\r\n\r\n.new-todo,\r\n.edit {\r\n  position: relative;\r\n  margin: 0;\r\n  width: 100%;\r\n  font-size: 24px;\r\n  font-family: inherit;\r\n  font-weight: inherit;\r\n  line-height: 1.4em;\r\n  border: 0;\r\n  color: inherit;\r\n  padding: 6px;\r\n  border: 1px solid #999;\r\n  box-shadow: inset 0 -1px 5px 0 rgba(0, 0, 0, 0.2);\r\n  box-sizing: border-box;\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n}\r\n\r\n.new-todo {\r\n  padding: 16px 16px 16px 60px;\r\n  border: none;\r\n  background: rgba(0, 0, 0, 0.003);\r\n  box-shadow: inset 0 -2px 1px rgba(0, 0, 0, 0.03);\r\n}\r\n\r\n.main {\r\n  position: relative;\r\n  z-index: 2;\r\n  border-top: 1px solid #e6e6e6;\r\n}\r\n\r\n.toggle-all {\r\n  width: 1px;\r\n  height: 1px;\r\n  border: none;\r\n  opacity: 0;\r\n  position: absolute;\r\n  right: 100%;\r\n  bottom: 100%;\r\n}\r\n\r\n.toggle-all + label {\r\n  width: 60px;\r\n  height: 34px;\r\n  font-size: 0;\r\n  position: absolute;\r\n  top: -52px;\r\n  left: -13px;\r\n  -webkit-transform: rotate(90deg);\r\n  transform: rotate(90deg);\r\n}\r\n\r\n.toggle-all + label:before {\r\n  content: '❯';\r\n  font-size: 22px;\r\n  color: #e6e6e6;\r\n  padding: 10px 27px 10px 27px;\r\n}\r\n\r\n.toggle-all:checked + label:before {\r\n  color: #737373;\r\n}\r\n\r\n.todo-list {\r\n  margin: 0;\r\n  padding: 0;\r\n  list-style: none;\r\n}\r\n\r\n.todo-list li {\r\n  position: relative;\r\n  font-size: 24px;\r\n  border-bottom: 1px solid #ededed;\r\n}\r\n\r\n.todo-list li:last-child {\r\n  border-bottom: none;\r\n}\r\n\r\n.todo-list li.editing {\r\n  border-bottom: none;\r\n  padding: 0;\r\n}\r\n\r\n.todo-list li.editing .edit {\r\n  display: block;\r\n  width: 506px;\r\n  padding: 12px 16px;\r\n  margin: 0 0 0 43px;\r\n}\r\n\r\n.todo-list li.editing .view {\r\n  display: none;\r\n}\r\n\r\n.todo-list li .toggle {\r\n  text-align: center;\r\n  width: 40px;\r\n  height: auto;\r\n  position: absolute;\r\n  top: 0;\r\n  bottom: 0;\r\n  margin: auto 0;\r\n  border: none;\r\n  -webkit-appearance: none;\r\n  appearance: none;\r\n}\r\n\r\n.todo-list li .toggle {\r\n  opacity: 0;\r\n}\r\n\r\n.todo-list li .toggle + label {\r\n  background-image: url('data:image/svg+xml;utf8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2240%22%20height%3D%2240%22%20viewBox%3D%22-10%20-18%20100%20135%22%3E%3Ccircle%20cx%3D%2250%22%20cy%3D%2250%22%20r%3D%2250%22%20fill%3D%22none%22%20stroke%3D%22%23ededed%22%20stroke-width%3D%223%22/%3E%3C/svg%3E');\r\n  background-repeat: no-repeat;\r\n  background-position: center left;\r\n}\r\n\r\n.todo-list li .toggle:checked + label {\r\n  background-image: url('data:image/svg+xml;utf8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2240%22%20height%3D%2240%22%20viewBox%3D%22-10%20-18%20100%20135%22%3E%3Ccircle%20cx%3D%2250%22%20cy%3D%2250%22%20r%3D%2250%22%20fill%3D%22none%22%20stroke%3D%22%23bddad5%22%20stroke-width%3D%223%22/%3E%3Cpath%20fill%3D%22%235dc2af%22%20d%3D%22M72%2025L42%2071%2027%2056l-4%204%2020%2020%2034-52z%22/%3E%3C/svg%3E');\r\n}\r\n\r\n.todo-list li label {\r\n  word-break: break-all;\r\n  padding: 15px 15px 15px 60px;\r\n  display: block;\r\n  line-height: 1.2;\r\n  transition: color 0.4s;\r\n}\r\n\r\n.todo-list li.completed label {\r\n  color: #d9d9d9;\r\n  text-decoration: line-through;\r\n}\r\n\r\n.todo-list li .destroy {\r\n  display: none;\r\n  position: absolute;\r\n  top: 0;\r\n  right: 10px;\r\n  bottom: 0;\r\n  width: 40px;\r\n  height: 40px;\r\n  margin: auto 0;\r\n  font-size: 30px;\r\n  color: #cc9a9a;\r\n  margin-bottom: 11px;\r\n  transition: color 0.2s ease-out;\r\n}\r\n\r\n.todo-list li .destroy:hover {\r\n  color: #af5b5e;\r\n}\r\n\r\n.todo-list li .destroy:after {\r\n  content: '×';\r\n}\r\n\r\n.todo-list li:hover .destroy {\r\n  display: block;\r\n}\r\n\r\n.todo-list li .edit {\r\n  display: none;\r\n}\r\n\r\n.todo-list li.editing:last-child {\r\n  margin-bottom: -1px;\r\n}\r\n\r\n.count-container {\r\n  color: #777;\r\n  padding: 10px 15px;\r\n  height: 20px;\r\n  text-align: center;\r\n  border-top: 1px solid #e6e6e6;\r\n}\r\n\r\n.count-container:before {\r\n  content: '';\r\n  position: absolute;\r\n  right: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  height: 50px;\r\n  overflow: hidden;\r\n  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.2), 0 8px 0 -3px #f6f6f6, 0 9px 1px -3px rgba(0, 0, 0, 0.2),\r\n    0 16px 0 -6px #f6f6f6, 0 17px 2px -6px rgba(0, 0, 0, 0.2);\r\n}\r\n\r\n.todo-count {\r\n  float: left;\r\n  text-align: left;\r\n}\r\n\r\n.todo-count strong {\r\n  font-weight: 300;\r\n}\r\n\r\n.filters {\r\n  margin: 0;\r\n  padding: 0;\r\n  list-style: none;\r\n  position: absolute;\r\n  right: 0;\r\n  left: 0;\r\n}\r\n\r\n.filters li {\r\n  display: inline;\r\n}\r\n\r\n.filters li a {\r\n  color: inherit;\r\n  margin: 3px;\r\n  padding: 3px 7px;\r\n  text-decoration: none;\r\n  border: 1px solid transparent;\r\n  border-radius: 3px;\r\n}\r\n\r\n.filters li a:hover {\r\n  border-color: rgba(175, 47, 47, 0.1);\r\n}\r\n\r\n.filters li a.selected {\r\n  border-color: rgba(175, 47, 47, 0.2);\r\n}\r\n\r\n.clear-completed,\r\nhtml .clear-completed:active {\r\n  float: right;\r\n  position: relative;\r\n  line-height: 20px;\r\n  text-decoration: none;\r\n  cursor: pointer;\r\n}\r\n\r\n.clear-completed:hover {\r\n  text-decoration: underline;\r\n}\r\n\r\n.info {\r\n  margin: 65px auto 0;\r\n  color: #bfbfbf;\r\n  font-size: 10px;\r\n  text-shadow: 0 1px 0 rgba(255, 255, 255, 0.5);\r\n  text-align: center;\r\n}\r\n\r\n.info p {\r\n  line-height: 1;\r\n}\r\n\r\n.info a {\r\n  color: inherit;\r\n  text-decoration: none;\r\n  font-weight: 400;\r\n}\r\n\r\n.info a:hover {\r\n  text-decoration: underline;\r\n}\r\n\r\n@media screen and (-webkit-min-device-pixel-ratio: 0) {\r\n  .toggle-all,\r\n  .todo-list li .toggle {\r\n    background: none;\r\n  }\r\n\r\n  .todo-list li .toggle {\r\n    height: 40px;\r\n  }\r\n}\r\n\r\n@media (max-width: 430px) {\r\n  .count-container {\r\n    height: 50px;\r\n  }\r\n\r\n  .filters {\r\n    bottom: 10px;\r\n  }\r\n}\r\n\r\n.ripple {\r\n  background-position: center;\r\n  transition: background 0.6s;\r\n  font-weight: bold;\r\n}\r\n.ripple:hover {\r\n  background: #616161 radial-gradient(circle, transparent 1%, #616161 1%) center/15000%;\r\n  color: white;\r\n}\r\n.ripple:active {\r\n  background-color: #9e9e9e;\r\n  background-size: 100%;\r\n  transition: background 0s;\r\n  color: white;\r\n}\r\n\r\nbutton.ripple.active {\r\n  background-color: #424242;\r\n  color: white;\r\n}\r\n\r\nbutton.ripple {\r\n  border: none;\r\n  border-radius: 2px;\r\n  padding: 6px 9px;\r\n  margin: 3px 0;\r\n  font-size: 12px;\r\n  cursor: pointer;\r\n  color: #333;\r\n  background-color: #eeeeee;\r\n  box-shadow: 0 0 4px #999;\r\n  outline: none;\r\n}\r\n\r\n@keyframes placeHolderShimmer {\r\n  0% {\r\n    -webkit-transform: translateZ(0);\r\n    transform: translateZ(0);\r\n    background-position: -418px 0;\r\n  }\r\n  to {\r\n    -webkit-transform: translateZ(0);\r\n    transform: translateZ(0);\r\n    background-position: 418px 0;\r\n  }\r\n}\r\n\r\n.animated-background {\r\n  will-change: transform;\r\n  animation: placeHolderShimmer 1s linear infinite forwards;\r\n  -webkit-backface-visibility: hidden;\r\n  background: #e6e6e6;\r\n  background: linear-gradient(90deg, #eee 8%, #ddd 18%, #eee 33%);\r\n  background-size: 800px 104px;\r\n  height: 100%;\r\n  position: relative;\r\n}\r\n\r\n.skel-mask-container {\r\n  position: relative;\r\n  height: 20px;\r\n}\r\n\r\n.skel-mask {\r\n  background: #fff;\r\n  position: absolute;\r\n  z-index: 200;\r\n}\r\n\r\n.chip {\r\n  width: 40px;\r\n  display: block;\r\n  font-size: 10px;\r\n  color: #fff;\r\n  font-weight: normal;\r\n  border-radius: 15px;\r\n  text-align: center;\r\n  left: 60px;\r\n  top: 3px;\r\n}\r\n\r\n.chip.primary {\r\n  background-color: #d63a49;\r\n}\r\n\r\n.chip.secondary {\r\n  background-color: #26c6da;\r\n}\r\n\r\nselect.chip {\r\n  border-color: #e0e0e0;\r\n  color: #bdbdbd;\r\n  width: 45px;\r\n}\r\n\r\nbutton.user-create-button.ripple {\r\n  border-radius: 15px 0 0 15px;\r\n  padding-left: 10px;\r\n  margin: 0 0 0 10px;\r\n}\r\n\r\nbutton.user-delete-button.ripple {\r\n  border-radius: 0 15px 15px 0;\r\n  padding-right: 10px;\r\n  margin-left: -5px;\r\n}\r\n",""]);const i=o},645:t=>{t.exports=function(t){var r=[];return r.toString=function(){return this.map((function(r){var n=t(r);return r[2]?"@media ".concat(r[2]," {").concat(n,"}"):n})).join("")},r.i=function(t,n,e){"string"==typeof t&&(t=[[null,t,""]]);var o={};if(e)for(var i=0;i<this.length;i++){var s=this[i][0];null!=s&&(o[s]=!0)}for(var a=0;a<t.length;a++){var l=[].concat(t[a]);e&&o[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),r.push(l))}},r}},379:(t,r,n)=>{var e,o=function(){var t={};return function(r){if(void 0===t[r]){var n=document.querySelector(r);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[r]=n}return t[r]}}(),i=[];function s(t){for(var r=-1,n=0;n<i.length;n++)if(i[n].identifier===t){r=n;break}return r}function a(t,r){for(var n={},e=[],o=0;o<t.length;o++){var a=t[o],l=r.base?a[0]+r.base:a[0],d=n[l]||0,c="".concat(l," ").concat(d);n[l]=d+1;var p=s(c),h={css:a[1],media:a[2],sourceMap:a[3]};-1!==p?(i[p].references++,i[p].updater(h)):i.push({identifier:c,updater:f(h,r),references:1}),e.push(c)}return e}function l(t){var r=document.createElement("style"),e=t.attributes||{};if(void 0===e.nonce){var i=n.nc;i&&(e.nonce=i)}if(Object.keys(e).forEach((function(t){r.setAttribute(t,e[t])})),"function"==typeof t.insert)t.insert(r);else{var s=o(t.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(r)}return r}var d,c=(d=[],function(t,r){return d[t]=r,d.filter(Boolean).join("\n")});function p(t,r,n,e){var o=n?"":e.media?"@media ".concat(e.media," {").concat(e.css,"}"):e.css;if(t.styleSheet)t.styleSheet.cssText=c(r,o);else{var i=document.createTextNode(o),s=t.childNodes;s[r]&&t.removeChild(s[r]),s.length?t.insertBefore(i,s[r]):t.appendChild(i)}}function h(t,r,n){var e=n.css,o=n.media,i=n.sourceMap;if(o?t.setAttribute("media",o):t.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(e+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}var u=null,g=0;function f(t,r){var n,e,o;if(r.singleton){var i=g++;n=u||(u=l(r)),e=p.bind(null,n,i,!1),o=p.bind(null,n,i,!0)}else n=l(r),e=h.bind(null,n,r),o=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return e(t),function(r){if(r){if(r.css===t.css&&r.media===t.media&&r.sourceMap===t.sourceMap)return;e(t=r)}else o()}}t.exports=function(t,r){(r=r||{}).singleton||"boolean"==typeof r.singleton||(r.singleton=(void 0===e&&(e=Boolean(window&&document&&document.all&&!window.atob)),e));var n=a(t=t||[],r);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var e=0;e<n.length;e++){var o=s(n[e]);i[o].references--}for(var l=a(t,r),d=0;d<n.length;d++){var c=s(n[d]);0===i[c].references&&(i[c].updater(),i.splice(c,1))}n=l}}}}},r={};function n(e){var o=r[e];if(void 0!==o)return o.exports;var i=r[e]={id:e,exports:{}};return t[e](i,i.exports,n),i.exports}n.n=t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return n.d(r,{a:r}),r},n.d=(t,r)=>{for(var e in r)n.o(r,e)&&!n.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:r[e]})},n.o=(t,r)=>Object.prototype.hasOwnProperty.call(t,r),(()=>{const t="#user-title strong",r="Enter",e="Escape",o="all",i="active",s="completed",a={NONE:"select",FIRST:"primary",SECOND:"secondary"},l="https://js-todo-list-9ca3a.df.r.appspot.com/api/users";class d{constructor(){this.observers=[]}subscribe(t){this.observers=this.observers.concat(t)}publish(){this.observers.forEach((t=>t()))}}const c=new class extends d{constructor(){super(),this._user={}}get(){return this._user}set(t){this._user=t,this.publish()}},p=new class extends d{constructor(){super(),this._todoList=[]}get(){return this._todoList}set(t){this._todoList=t,this.publish()}},h=new class extends d{constructor(){super(),this._filter=o}get(){return this._filter}set(t){this._filter=t,this.publish()}};function u(t){return document.querySelector(t)}function g(t){return 0===Object.keys(t).length&&JSON.stringify(t)===JSON.stringify({})}const f={get:(t="")=>fetch(t),post(t="",r={}){const n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)};return fetch(t,n)},put(t="",r={}){const n={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)};return fetch(t,n)},delete:(t="")=>fetch(t,{method:"DELETE",headers:{"Content-Type":"application/json"}})},b=async()=>{try{const t=await f.get(l);if(t.ok)return t.json();throw new Error(`${t.status}, ${t.statusText}`)}catch(t){console.error(`User List Get Error: ${t}`)}},x=async t=>{try{const r=await f.post(l,t);if(r.ok)return r.json();throw new Error(`${r.status}, ${r.statusText}`)}catch(t){console.error(`Create User Error: ${t}`)}},m=async t=>{try{const r=await f.delete((t=>`${l}/${t}`)(t));if(r.ok)return r.json();throw new Error(`${r.status}, ${r.statusText}`)}catch(t){console.error(`Delete User Error:${t}`)}},w=async t=>{try{const r=await f.get((t=>`${l}/${t}/items`)(t));if(r.ok)return r.json();throw new Error(`${r.status}, ${r.statusText}`)}catch(t){console.error(`Todo List Get Error: ${t}`)}},v=async(t,r)=>{try{const n=await f.post((t=>`${l}/${t}/items`)(t),r);if(n.ok)return n.json();throw new Error(`${n.status}, ${n.statusText}`)}catch(t){console.error(`Add Todo List Item Error:${t}`)}},y=async(t,r)=>{try{const n=await f.put(((t,r)=>`${l}/${t}/items/${r}/toggle`)(t,r));if(n.ok)return n.json();throw new Error(`${n.status}, ${n.statusText}`)}catch(t){console.error(`Toggle Todo Item Error:${t}`)}},$=async t=>{try{const r=await f.delete((t=>`${l}/${t}/items`)(t));if(r.ok)return r.json();throw new Error(`${r.status}, ${r.statusText}`)}catch(t){console.error(`Toggle Todo Item Error:${t}`)}},k=async(t,r)=>{try{const n=await f.delete(((t,r)=>`${l}/${t}/items/${r}`)(t,r));if(n.ok)return n.json();throw new Error(`${n.status}, ${n.statusText}`)}catch(t){console.error(`Toggle Todo Item Error:${t}`)}},S=async(t,r,n)=>{try{const e=await f.put(((t,r)=>`${l}/${t}/items/${r}`)(t,r),n);if(e.ok)return e.json();throw new Error(`${e.status}, ${e.statusText}`)}catch(t){console.error(`Toggle Todo Item Error:${t}`)}},E=async(t,r,n)=>{try{const e=await f.put(((t,r)=>`${l}/${t}/items/${r}/priority`)(t,r),n);if(e.ok)return e.json();throw new Error(`${e.status}, ${e.statusText}`)}catch(t){console.error(`Toggle Todo Item Error:${t}`)}};class L{constructor(){return this.$usersList=u("#user-list"),this.userState=c,this.todoState=p,this.userState.subscribe(this.changeTodoListByUser.bind(this)),this.addEvent(),(async()=>(await this.init(),this))()}addEvent(){this.$usersList.addEventListener("click",this.userListClickHandler.bind(this))}userListClickHandler({target:t}){({undefined:this.changeUser.bind(this),createUser:this.createUser.bind(this),deleteUser:this.deleteUser.bind(this)})[t.dataset.action](t)}async changeUser(r){if(!r.classList.contains("ripple"))return;[...this.$usersList.querySelectorAll("button.ripple")].map((t=>t.classList.remove("active"))),r.classList.add("active");const n=r.dataset.id,e=r.textContent;this.userState.set({userId:n,name:e}),u(t).textContent=e}async createUser(){const t=prompt("추가하고 싶은 이름을 입력해주세요.");if(null===t)return;if(t.length<2)return void alert("유저 생성 오류 - 최소 2글자 이상이어야 합니다.");const r=await x({name:t});this.userState.set({userId:r._id,name:r.name})}async deleteUser(){if(!confirm("정말로 삭제하시겠습니까?"))return;const t=this.userState.get().userId;if(!(await m(t)).message)return;await this.render();const r=this.$usersList.querySelector("button");if(r&&r){const t=r.dataset.id,n=r.textContent;this.userState.set({userId:t,name:n})}}async changeTodoListByUser(){const t=this.userState.get(),r=await w(t.userId);this.todoState.set(r)}async init(){const r=await b(),n=this.getUserTemplate(r);this.$usersList.innerHTML=n;const e=u(t),o=this.$usersList.querySelector("button");if(!o)return void(e.textContent="");e.textContent=o.textContent;const i=o.dataset.id,s=o.textContent;this.userState.set({userId:i,name:s})}async render(){const t=await b(),r=this.getUserTemplate(t);this.$usersList.innerHTML=r}getUserTemplate(t){const r=this.userState.get().userId;let n=t.reduce(((t,n,e)=>t+`\n          <button class="ripple ${void 0===r&&0===e||r===n._id?"active":""}" data-id=${n._id}>${n.name}</button>`),"");return n+='\n      <button class="ripple user-create-button" data-action="createUser">+ 유저 생성</button>\n      <button class="ripple user-delete-button" data-action="deleteUser">삭제 -</button>\n    ',n}}class T{constructor(){this.$target=u(".new-todo"),this.todoState=p,this.userState=c,this.addEvent()}addEvent(){this.$target.addEventListener("keypress",this.addTodo.bind(this))}async addTodo({code:t}){if(t!==r)return;const n=this.$target.value;if(n.length<2)return void alert("컨텐츠 생성 오류 - 최소 2글자 이상이어야 합니다.");const{userId:e}=this.userState.get(),o=await v(e,{contents:n});if(g(o))return;const i=this.todoState.get().concat(o);this.todoState.set(i),this.initInput()}initInput(){this.$target.value=""}}class C{constructor(){this.$target=u(".count-container"),this.$filterMenu={[o]:this.$target.querySelector(".all"),[i]:this.$target.querySelector(".active"),[s]:this.$target.querySelector(".completed")},this.filterState=h,this.userState=c,this.todoState=p,this.addEvent()}addEvent(){this.$target.addEventListener("click",this.changeFilter.bind(this)),this.$target.addEventListener("click",this.allDelete.bind(this))}async allDelete({target:t}){if(!t.classList.contains("clear-completed"))return;const{userId:r}=this.userState.get();(await $(r)).success&&(this.filterState.set(o),this.todoState.set([]))}changeFilter(t){t.stopPropagation();const r=t.target.classList[0];this.isFilterClass(r)&&(Object.keys(this.$filterMenu).map((t=>this.$filterMenu[t].classList.remove("selected"))),t.target.classList.add("selected"),this.filterState.set(r))}isFilterClass(t){return t===o||t===i||t===s}renderCount(t){this.$target.querySelector(".todo-count > strong").textContent=t}}class D{constructor(){this.$target=u(".todo-list"),this.todoState=p,this.userState=c,this.init(),this.addEvent()}addEvent(){this.$target.addEventListener("click",this.toggleTodoDone.bind(this)),this.$target.addEventListener("click",this.deleteTodo.bind(this)),this.$target.addEventListener("dblclick",this.openEditMode.bind(this)),this.$target.addEventListener("keyup",this.closeEditMode.bind(this)),this.$target.addEventListener("change",this.changeSelector.bind(this))}async changeSelector({target:t}){if(!t.classList.contains("chip"))return;const r=t.value;if(r===a.select)return;const n=this.userState.get().userId,e=t.closest("li").id;if(g(await E(n,e,{priority:r})))return;const o=this.todoState.get().map((t=>t._id==e?{...t,priority:r}:t));this.todoState.set(o)}async deleteTodo({target:t}){if("destroy"!==t.classList.value)return;const r=this.userState.get().userId,n=t.id;if(g(await k(r,n)))return;const e=this.todoState.get().filter((t=>t._id!==n));this.todoState.set(e)}async toggleTodoDone({target:t}){if("toggle"!==t.classList.value)return;const r=this.userState.get().userId,n=t.id;if(g(await y(r,n)))return;const e=this.todoState.get().map((t=>t._id==n?{...t,isCompleted:!t.isCompleted}:t));this.todoState.set(e)}async updateTodoValue(t,r){const n=this.userState.get().userId;if(g(await S(n,t,{contents:r})))return;const e=this.todoState.get().map((n=>n._id===t?{...n,contents:r}:n));this.todoState.set(e)}openEditMode({target:t}){"label"===t.classList.value&&t.closest("li").classList.add("editing")}closeEditMode({target:t,key:n}){if(n!==e&&n!==r)return;const o=t.closest("li"),i=t.id,s=o.querySelector(".edit").value;n!==e?this.updateTodoValue(i,s):o.classList.remove("editing")}render(t){const r=t.map(I);this.$target.innerHTML=r.join("")}async init(){const t=this.userState.get().userId,r=await w(t);this.todoState.set(r)}}function I({_id:t,contents:r,isCompleted:n,priority:e}){return`\n  <li id="${t}" class="${n&&"completed"}">\n    <div class="view">\n      <input id="${t}" class="toggle" type="checkbox" ${n&&"checked"}/>\n      <label class="label">\n        ${function(t){return"select"===a[t]?`\n        <select class="chip select">\n          <option value="${a.NONE}" selected>순위</option>\n          <option value="${a.FIRST}">1순위</option>\n          <option value="${a.SECOND}">2순위</option>\n        </select>\n      `:`\n      <span class="chip ${t}">${t===a.FIRST?"1":"2"}순위</span>\n    `}(e)}\n        ${r}\n      </label>\n      <button id=${t} class="destroy"></button>\n    </div>\n    <input id="${t}" class="edit" value=${r} />\n  </li>\n  `}class j{constructor(){return this.todoState=p,this.filterState=h,this.userState=c,this.todoState.subscribe(this.render.bind(this)),this.filterState.subscribe(this.render.bind(this)),this.userState.subscribe(this.render.bind(this)),(async()=>(this.userList=await new L,new T,this.todoList=new D,this.todoCount=new C,this))()}render(){const t=this.filterState.get();let r=this.todoState.get();r=this.getFilteredTodoList(r,t),this.userList&&this.userList.render(),this.todoList&&this.todoList.render(r),this.todoCount&&this.todoCount.renderCount(r?r.length:0)}getFilteredTodoList(t,r){return{[o]:t,[i]:t.filter((t=>!t.isCompleted)),[s]:t.filter((t=>t.isCompleted))}[r]}}var z=n(379),U=n.n(z),M=n(71);U()(M.Z,{insert:"head",singleton:!1}),M.Z.locals,window.addEventListener("load",(function(){new j}))})()})();